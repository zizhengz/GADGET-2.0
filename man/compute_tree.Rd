% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tree_splitting.R
\name{compute_tree}
\alias{compute_tree}
\title{Compute single tree based on Class 'Node'}
\usage{
compute_tree(
  effect,
  testdata,
  model,
  predict.function,
  objective = "SS_L2_pd",
  Z,
  target.feature,
  n.split,
  impr.par = 0.1,
  min.split = 10,
  n.quantiles = 100,
  store.data = FALSE,
  shap.recalc = FALSE
)
}
\arguments{
\item{effect}{An \pkg{iml}\::\code{FeatureEffect} object created
with \code{method = "ice" \| "ale"} (depending on \code{objective}).}

\item{testdata}{Original data set (\code{data.frame}/\code{data.table})
used for model training or evaluation.}

\item{model}{Fitted prediction model (passed through to SHAP/ALE
recalculations).}

\item{predict.function}{Function of signature
\code{predict.function(model, newdata)} returning numeric
predictions.}

\item{objective}{Character. One of \code{"SS_L2_pd"},
\code{"SS_L2_ale"}, or \code{"SS_L2_shap"}.}

\item{Z}{Character vector of covariate names kept as splitting
candidates.}

\item{target.feature}{Character. Label for y-axis in downstream
plots (not used inside the algorithm).}

\item{n.split}{Integer. Maximum tree depth (root counts as depth 1).}

\item{impr.par}{Numeric in (0, 1]. Relative improvement threshold:
splits with improvement below \code{impr.par} are not pursued.}

\item{min.split}{Integer. Minimum observations that each child node
must hold.}

\item{n.quantiles}{Integer. Number of quantile based candidate
points passed to \code{generate_split_candidates()}.}

\item{store.data}{Logical. If \code{TRUE}, caches node-local ICE /
ALE / SHAP matrices inside each \code{Node} to accelerate later
operations (at the cost of memory).}

\item{shap.recalc}{Logical. If \code{TRUE} re-computes SHAP values
for child nodes instead of sub-setting the parent cache.}
}
\value{
A nested list representing the tree: level 1 contains the
  root (\code{Node}), level 2 the two children, and so on.  Each
  element is either a \code{Node} object or \code{NULL} (for pruned
  leaves).
}
\description{
Compute single tree based on Class 'Node'
}
\section{Supported objectives}{

\describe{
  \item{\code{SS_L2_pd}}{Sum-of-squares on centered ICE curves
    (partial dependence).}
  \item{\code{SS_L2_ale}}{Sum-of-squares on accumulated local effect
    derivatives, including numerical stabilization in the tails.}
  \item{\code{SS_L2_shap}}{Spline-smoothed residual variance of SHAP
    values.}
}
}

